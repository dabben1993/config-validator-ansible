---
- name:
  become: yes
  shell: "pip3 install structlog cerberus pyyaml"
  register: pip_output
  ignore_errors: true

- name: debugging
  debug:
    msg: "{{ schema_path }} | {{ data_path }} | {{ save_path }}"

- name: Convert Windows paths to Unix paths
  set_fact:
    schema_path_unix: "{{ schema_path | regex_replace('\\\\', '/') }}"
    data_path_unix: "{{ data_path | regex_replace('\\\\', '/') }}"
    save_path_unix: "{{ save_path | regex_replace('\\\\', '/') }}"

- name: debugging
  debug:
    msg: "{{ schema_path_unix }} {{ data_path_unix }} {{ save_path_unix }}"


- name: Run validation script
  script: scripts/file_validator2.py {{ schema_path_unix }} {{ data_path_unix }} {{ save_path_unix }}
  register: file_validator_output

- name: Show output of FileValidator script
  debug:
    msg: "{{ file_validator_output }}"